!function(){"use strict";function o(o,i,e,t,n,a,l,s,r,g,c){function d(){o.isAuthenticated()&&(n.nextViewOptions({historyRoot:!0}),e.transitionTo("app.inbox"))}function u(){p.loginData=[],p.loginForm.$setUntouched(),p.submitted=!1,p.loginFailed=!1,p.loginFailedMessage=""}o.broadcastNetworkAvailability();var p=this;p.loginData=[],p.submitted=!1,p.loginFailedMessage,p.showloading=!1,p.showbackbutton=!0,p.scrolled=!1;var w=c.email;p.loginData.email=w,d(),p.doLogin=function(o){p.submitted=!0,o?p.loginFailed=!1:(p.showloading=!0,i.login(p.loginData.email,p.loginData.password).then(function(o){p.showloading=!1,null!=o.access_token&&o.access_token.length>0?(i.getMemberFromDeviceDB(),n.nextViewOptions({historyRoot:!0}),e.go("app.inbox",{},{reload:!0})):(p.showloading=!1,p.loginFailed=!0,p.loginFailedMessage=o.error_description)}))},g.$on("$stateChangeSuccess",function(o,i,e,t,n){"app.signup"===t.name?p.showbackbutton=!0:p.showbackbutton=!1}),p.goback=function(){u(),n.nextViewOptions({historyRoot:!0}),event.preventDefault(),e.go("app.signup")},p.gotoSignUp=function(){if(o.isNetworkAvailable()){var i=angular.isUndefined(p.loginData.email)?"":p.loginData.email;u(),n.nextViewOptions({historyRoot:!0}),event.preventDefault(),e.go("app.signup",{email:i})}else o.broadcastNetworkAvailability()},p.gotoForgotPassword=function(){if(p.showloading=!1,o.isNetworkAvailable()){var i=angular.isUndefined(p.loginData.email)?"":p.loginData.email;u(),n.nextViewOptions({historyRoot:!0}),e.go("app.forgotPassword",{email:i})}else o.broadcastNetworkAvailability()},p.scrolltop=function(){p.loginFailedMessage="",r.scrollBy(0,40,!0)},t.$on("$ionicView.beforeEnter",function(o,i){p.loginFailedMessage="",p.showloading=!1})}angular.module("newsletterApp").controller("loginController",o),o.$inject=["authService","sqlLiteService","$state","$scope","$ionicHistory","$window","$cordovaNetwork","$ionicPopup","$ionicScrollDelegate","$rootScope","$stateParams"]}();