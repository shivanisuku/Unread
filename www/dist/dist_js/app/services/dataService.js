function dataService(e,s,r,t,a){function o(r){var t=g+envVariables.getCategory+r;console.log(t);var o=s.defer();if(a.isNetworkAvailable())e.get(t).success(function(e){e.isSuccessful=!0,o.resolve(e)}).error(function(e){e={isSuccessful:!1},o.resolve(e)});else{var i={isSuccessful:!1};o.resolve(i)}return o.promise}function i(r,t){var o=s.defer(),i=g+envVariables.getNewsletters.replace("[[pageSize]]",t).replace("[[categoryId]]",r);if(a.isNetworkAvailable())e.get(i).success(function(e){o.resolve(e)}).error(function(e){e={isSuccessful:!1},o.resolve(e)});else{var n={isSuccessful:!1};o.resolve(n)}return o.promise}function n(r){var t=a.getoAuth(),o="Bearer "+t.access_token,i=t.member_id,n={"Content-Type":"application/json",Authorization:o},l=s.defer(),c=g+envVariables.getMemberNewsletterEmails.replace("[[lastSentId]]",r).replace("[[mid]]",i);if(a.isNetworkAvailable())e.get(c,{headers:n}).success(function(e){l.resolve(e)}).error(function(e){e={msg:{isSuccessful:!1}},l.resolve(e)});else{var u={msg:{isSuccessful:!1}};l.resolve(u)}return l.promise}function l(r,t){var o=a.getoAuth(),i="Bearer "+o.access_token,n=o.member_id,l={"Content-Type":"application/json",Authorization:i},c=s.defer(),u=g+envVariables.updateMemberNewsletterEmailStatus.replace("[[mid]]",n).replace("[[emailid]]",r).replace("[[statusid]]",t);if(a.isNetworkAvailable())e.get(u,{headers:l}).success(function(e){c.resolve(e)}).error(function(e){e={isSuccessful:!1,saveToApiLog:!a.isNetworkAvailable()},c.resolve(e)});else{var v={isSuccessful:!1,saveToApiLog:!0};c.resolve(v)}return c.promise}function c(r){var t=a.getoAuth(),o="Bearer "+t.access_token,i=g+envVariables.batchUpdateMemberEmailStatus,n={"Content-Type":"application/json",Authorization:o},l=s.defer();return e({method:"POST",url:i,headers:n,data:r}).success(function(e){console.log(e),l.resolve(e)}).error(function(e){e={isSuccessful:!1,message:"An error has occured please try again"},l.resolve(e)}),l.promise}function u(r,t){var o,i={"Content-Type":"application/json"},n=a.getoAuth();if(null!=n||!angular.isUndefined(n)){var l="Bearer "+n.access_token;i={"Content-Type":"application/json",Authorization:l},o={MemberId:n.member_id,SignupIds:r,NewsletterCategoryId:t}}var c=g+envVariables.saveMemberSignupList,u=s.defer();if(a.isNetworkAvailable())e({method:"POST",url:c,headers:i,data:o}).success(function(e){u.resolve(e)}).error(function(e){e={isSuccessful:!1,saveToApiLog:!a.isNetworkAvailable()},u.resolve(e)});else{var v={isSuccessful:!1,saveToApiLog:!0};u.resolve(v)}return u.promise}function v(){var r=a.getoAuth(),t="Bearer "+r.access_token,o=r.member_id,i={"Content-Type":"application/json",Authorization:t},n=s.defer(),l=g+envVariables.getTrendingNewsletters.replace("[[mid]]",o);if(a.isNetworkAvailable())e.get(l,{headers:i}).success(function(e){n.resolve(e)}).error(function(e){e={msg:{isSuccessful:!1}},n.resolve(e)});else{var c={msg:{isSuccessful:!1}};n.resolve(c)}return n.promise}function f(r){var t=a.getoAuth(),o="Bearer "+t.access_token,i=t.member_id,n={"Content-Type":"application/json",Authorization:o},l=s.defer(),c=g+envVariables.saveNewsletterAsUnsub.replace("[[mid]]",i).replace("[[id]]",r);if(a.isNetworkAvailable())e.get(c,{headers:n}).success(function(e){l.resolve(e)}).error(function(e){e={isSuccessful:!1,saveToApiLog:!a.isNetworkAvailable()},l.resolve(e)});else{var u={isSuccessful:!1,saveToApiLog:!a.isNetworkAvailable()};l.resolve(u)}return l.promise}function p(){var r=a.getoAuth(),t="Bearer "+r.access_token,o=r.member_id,i={"Content-Type":"application/json",Authorization:t},n=s.defer(),l=g+envVariables.getMemberNewsletter.replace("[[mid]]",o);if(a.isNetworkAvailable())e.get(l,{headers:i}).then(function(e){console.log(e),n.resolve(e)},function(e){e={isSuccessful:!1},n.resolve(e)});else{var c={isSuccessful:!1};n.resolve(c)}return n.promise}function d(r){var t=a.getoAuth(),o="Bearer "+t.access_token;r.memberId=t.member_id;var i=g+envVariables.feedback,n={"Content-Type":"application/json",Authorization:o},l=s.defer();return e({method:"POST",url:i,headers:n,data:r}).success(function(e){console.log(e),l.resolve(e)}).error(function(e){console.log(e),e={isSuccessful:!1,message:"An error has occured please retry again"},a.isNetworkAvailable()||(e={isSuccessful:!1,message:"Please check your internet connection and try again or email to support@unreadapp.com"}),l.resolve(e)}),l.promise}var g=envVariables.url;e.defaults.headers.put={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin,Content-Type, X-Requested-With,Accept"},e.defaults.useXDomain=!0;var m;m=t("newsletterCategoryCache",{maxAge:36e5,deleteOnExpire:"aggressive",onExpire:function(e,s){o(!1,1).then(function(s){m.put(e,s)})}});return{getNewsletterCategory:o,getNewsletters:i,getMemberNewsletterEmails:n,updateEmail:l,saveMemberSignupList:u,getTrendingNewsletters:v,saveNewsletterAsUnsub:f,getMemberNewsletter:p,sendFeedback:d,batchUpdateMemberEmailStatus:c}}angular.module("newsletterApp").factory("dataService",dataService),dataService.$inject=["$http","$q","$filter","CacheFactory","authService"];