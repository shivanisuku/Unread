!function(){"use strict";function t(t,i,s,o,n,e,a){function r(){i.getMemberFromDeviceDB().then(function(t){u.signupData=t})}t.broadcastNetworkAvailability();var u=this;u.showloading=!1,u.submitted=!1,u.signupData,u.doLogout=function(){e.confirm({title:"Logout",content:"Are you sure you want to log out?",buttons:[{text:"Cancel",type:"button-positive"},{text:"Ok",type:"button-positive",onTap:function(i){a.clearCache(),a.clearHistory(),t.logout()}}]}).then(function(t){console.log(t)})},r(),u.clearPasswordError=function(){u.signupForm.password.$setValidity("pattern",!0),u.signupForm.password.$setValidity("minlength",!0),u.signupForm.password.$setValidity("maxlength",!0),u.signupForm.password.$setPristine()},u.signupFormSubmit=function(s){return u.submitted=!1,/^[a-zA-Z0-9 ]*$/.test(u.signupData.password.trim())?u.signupData.password.trim().length<6?(u.signupForm.password.$setValidity("minlength",!1),void u.signupForm.password.$setDirty()):u.signupData.password.trim().length>20?(u.signupForm.password.$setValidity("maxlength",!1),void u.signupForm.password.$setDirty()):void(s||(u.showloading=!0,u.signupData.birthday=u.signupData.birthyear+"-"+u.signupData.birthmonth+"-"+u.signupData.birthdate,i.updateMemberToDeviceDB(u.signupData).then(function(i){i&&t.SaveMember(u.signupData).then(function(t){if(console.log(t),t.isSuccessful)u.showloading=!1,e.confirm({title:"Success",content:"Password has been updated.",buttons:[{text:"Close",type:"button-positive"}]}).then(function(t){});else{return u.showloading=!1,u.signupForm.password.$setValidity("pattern",!1),void u.signupForm.password.$setDirty()}})}))):(u.signupForm.password.$setValidity("pattern",!1),void u.signupForm.password.$setDirty())}}angular.module("newsletterApp").controller("settingsController",t),t.$inject=["authService","sqlLiteService","$state","$window","$scope","$ionicPopup","$ionicHistory"]}();